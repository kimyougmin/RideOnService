'use client';

import Link from 'next/link';
import { useEffect, useState } from 'react';
import { usePathname } from 'next/navigation';

export default function Header() {
  const [isDarkMode, setIsDarkMode] = useState<boolean>(false);
  const pathname = usePathname();

  useEffect(() => {
    const theme = localStorage.getItem('theme');
    if (theme === 'dark') {
      document.documentElement.classList.add('dark');
      setIsDarkMode(true);
    }
  }, []);

  useEffect(() => {
    document.documentElement.classList.toggle('dark', isDarkMode);
    localStorage.setItem('theme', isDarkMode ? 'dark' : 'light');
  }, [isDarkMode]);

  const toggleDarkMode = () => {
    setIsDarkMode(prev => !prev);
  };

  return (
    <header className="w-full px-8 sm:px-40 lg:px-94 py-6 sm:py-30 mx-auto bg-black1 dark:bg-black9 pb-4 flex flex-col gap-4">
      <div className="flex justify-between items-center w-full">
        {/* Logo */}
        <Link href="/">
          <svg width="126" height="25" viewBox="0 0 126 25" fill="none" xmlns="http://www.w3.org/2000/svg">
            {/* Insert your SVG path here */}
            <path
              d="M0.536 24.328L10.104 1.768C10.3173 1.32 10.6373 1.096 11.064 1.096H27.256C30.1787 1.096 31.64 1.94933 31.64 3.656C31.64 4.36 31.4373 5.16 31.032 6.056L28.376 12.36C27.864 13.576 27.1707 14.5467 26.296 15.272C25.4427 15.976 24.3653 16.4667 23.064 16.744L23.352 24.392C23.352 24.7973 23.1387 25 22.712 25H16.568C16.0987 25 15.864 24.7973 15.864 24.392L15.704 17H11.576L8.472 24.328C8.30133 24.776 7.98133 25 7.512 25H0.92C0.493333 25 0.365333 24.776 0.536 24.328ZM20.088 11.176C20.6853 11.176 21.1227 10.8453 21.4 10.184L21.976 8.808C22.0827 8.552 22.136 8.36 22.136 8.232C22.136 7.93333 21.9333 7.784 21.528 7.784H15.48L14.04 11.176H20.088ZM25.0545 24.392L29.5665 13.736H28.8305C28.4465 13.736 28.3292 13.5333 28.4785 13.128L30.6545 8.072C30.8038 7.66667 31.0918 7.464 31.5185 7.464H38.9745C39.3585 7.464 39.4758 7.66667 39.3265 8.072L32.3825 24.392C32.2332 24.7973 31.9452 25 31.5185 25H25.4065C25.0225 25 24.9052 24.7973 25.0545 24.392ZM33.2465 5.064L35.0705 0.807999C35.2198 0.402665 35.5078 0.199999 35.9345 0.199999H42.0465C42.4305 0.199999 42.5478 0.402665 42.3985 0.807999L40.5745 5.064C40.4252 5.46933 40.1372 5.672 39.7105 5.672H33.5985C33.2145 5.672 33.0972 5.46933 33.2465 5.064ZM34.9005 22.408C34.9005 21.6613 35.1032 20.8187 35.5085 19.88L38.5805 12.616C39.0072 11.6133 39.4338 10.792 39.8605 10.152C40.3085 9.49067 40.8098 8.95733 41.3645 8.552C41.9192 8.14667 42.5485 7.86933 43.2525 7.72C43.9778 7.54933 44.8312 7.464 45.8125 7.464H49.6525C49.8658 7.464 50.0472 7.48533 50.1965 7.528C50.3458 7.57067 50.5058 7.63467 50.6765 7.72L52.5965 8.84L56.0205 0.807999C56.1698 0.402665 56.4578 0.199999 56.8845 0.199999H62.9965C63.3805 0.199999 63.4978 0.402665 63.3485 0.807999L55.7325 18.728H56.2765C56.7032 18.728 56.8205 18.9307 56.6285 19.336L54.4845 24.392C54.3352 24.7973 54.0472 25 53.6205 25H50.2605C49.8552 25 49.5245 24.904 49.2685 24.712L46.9645 22.952L43.1885 24.712C42.7405 24.904 42.3245 25 41.9405 25H38.3565C36.0525 25 34.9005 24.136 34.9005 22.408ZM43.6365 18.376C43.6365 18.6107 43.7858 18.728 44.0845 18.728H48.4045L50.5165 13.736H46.1965C45.7272 13.736 45.3752 14.0347 45.1405 14.632L43.7645 17.832C43.6792 18.024 43.6365 18.2053 43.6365 18.376ZM56.195 22.408C56.195 21.7253 56.4083 20.872 56.835 19.848L59.715 13.096C60.2057 11.944 60.707 11.0053 61.219 10.28C61.7523 9.53333 62.3497 8.95733 63.011 8.552C63.6723 8.12533 64.4297 7.83733 65.283 7.688C66.1363 7.53867 67.139 7.464 68.291 7.464H75.715C77.187 7.464 78.2643 7.69867 78.947 8.168C79.6297 8.616 79.971 9.288 79.971 10.184C79.971 10.952 79.747 11.848 79.299 12.872L78.019 15.848C77.763 16.4667 77.4323 16.9147 77.027 17.192C76.643 17.4693 76.1417 17.608 75.523 17.608H65.219L65.091 17.864C64.9843 18.056 64.931 18.2373 64.931 18.408C64.931 18.6213 65.091 18.728 65.411 18.728H74.403C74.8297 18.728 74.947 18.9307 74.755 19.336L72.611 24.392C72.4617 24.7973 72.1737 25 71.747 25H59.971C58.6697 25 57.7097 24.7867 57.091 24.36C56.4937 23.912 56.195 23.2613 56.195 22.408ZM71.683 14.6L71.843 14.248C71.9497 14.0133 71.9603 13.8747 71.875 13.832C71.811 13.768 71.6297 13.736 71.331 13.736H67.523C67.2243 13.736 67.011 13.7893 66.883 13.896C66.7763 13.9813 66.6377 14.216 66.467 14.6H71.683ZM77.0297 21.992C77.0297 21.032 77.3284 19.8587 77.9258 18.472L82.5017 7.72C83.0564 6.39733 83.6004 5.30933 84.1337 4.456C84.6884 3.60267 85.2964 2.93067 85.9578 2.44C86.6191 1.928 87.3764 1.576 88.2298 1.384C89.1044 1.192 90.1498 1.096 91.3658 1.096H102.47C105.243 1.096 106.63 2.09867 106.63 4.104C106.63 5.10667 106.331 6.312 105.734 7.72L101.158 18.472C100.603 19.7733 100.059 20.8507 99.5258 21.704C98.9924 22.536 98.3951 23.1973 97.7338 23.688C97.0724 24.1787 96.3044 24.52 95.4298 24.712C94.5764 24.904 93.5417 25 92.3258 25H81.2218C78.4271 25 77.0297 23.9973 77.0297 21.992ZM86.8858 18.248H92.3898C92.9444 18.248 93.3604 17.9067 93.6378 17.224L97.2218 8.872C97.3284 8.59467 97.3818 8.392 97.3818 8.264C97.3818 7.98667 97.1898 7.848 96.8057 7.848H91.3018C90.7471 7.848 90.3311 8.18933 90.0538 8.872L86.4698 17.224C86.3631 17.5013 86.3098 17.704 86.3098 17.832C86.3098 18.1093 86.5018 18.248 86.8858 18.248ZM100.328 24.392L104.84 13.736H104.136C103.753 13.736 103.635 13.5333 103.785 13.128L105.961 8.072C106.11 7.66667 106.398 7.464 106.825 7.464H114.089C114.473 7.464 114.59 7.66667 114.441 8.072L114.057 8.936L118.249 7.656C118.697 7.528 119.123 7.464 119.529 7.464H120.937C122.537 7.464 123.699 7.69867 124.425 8.168C125.15 8.63733 125.513 9.384 125.513 10.408C125.513 11.3467 125.182 12.5947 124.521 14.152L120.201 24.328C120.009 24.776 119.689 25 119.241 25H113.193C112.745 25 112.617 24.776 112.809 24.328L116.937 14.632C117.022 14.44 117.065 14.2587 117.065 14.088C117.065 13.8533 116.905 13.736 116.585 13.736H112.233L107.72 24.392C107.571 24.7973 107.283 25 106.856 25H100.68C100.296 25 100.179 24.7973 100.328 24.392Z"
              fill="#DC3644"
            />
          </svg>
        </Link>

        {/* Icons */}
        <div className="flex gap-4 sm:gap-6 md:gap-8 items-center">
          {/* Search Icon */}
          <svg
            width="22"
            height="22"
            viewBox="0 0 22 22"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path d="M14 14L19 19" stroke={isDarkMode ? 'white' : 'black'} strokeWidth="2" strokeLinecap="round"
                  strokeLinejoin="round"/>
            <path
              d="M3 9.5C3 13.0899 5.91015 16 9.5 16C11.2981 16 12.9256 15.27 14.1023 14.0901C15.275 12.9143 16 11.2918 16 9.5C16 5.91015 13.0899 3 9.5 3C5.91015 3 3 5.91015 3 9.5Z"
              stroke={isDarkMode ? 'white' : 'black'}
              strokeWidth="2"
              strokeLinecap="round"
              strokeLinejoin="round"
            />
          </svg>

          {/* Dark Mode Toggle */}
          <svg
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            onClick={toggleDarkMode}
            className="cursor-pointer"
          >
            <path
              d="M11.998 2C17.515 2 21.995 6.48 21.995 11.998C21.995 17.515 17.515 21.995 11.998 21.995C6.48 21.995 2 17.515 2 11.998C2 6.48 6.48 2 11.998 2ZM11.998 3.5C7.308 3.5 3.5 7.308 3.5 11.998C3.5 16.688 7.308 20.495 11.998 20.495V3.5Z"
              fill={isDarkMode ? 'white' : 'black'}
            />
          </svg>

          {/* User Icon */}
          <Link href="/mypage">
            <svg
              width="25"
              height="26"
              viewBox="0 0 25 26"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M6 22.1663V21.1247C6 17.0976 9.26459 13.833 13.2917 13.833C17.3187 13.833 20.5833 17.0976 20.5833 21.1247V22.1663"
                stroke={isDarkMode ? 'white' : 'black'}
                strokeWidth="2.08333"
                strokeLinecap="round"
                strokeLinejoin="round"
              />
              <path
                d="M13.2917 13.8333C15.5928 13.8333 17.4583 11.9678 17.4583 9.66667C17.4583 7.36548 15.5928 5.5 13.2917 5.5C10.9905 5.5 9.125 7.36548 9.125 9.66667C9.125 11.9678 10.9905 13.8333 13.2917 13.8333Z"
                stroke={isDarkMode ? 'white' : 'black'}
                strokeWidth="2.08333"
                strokeLinecap="round"
                strokeLinejoin="round"
              />
            </svg>
          </Link>
        </div>
      </div>

      {/* Navigation Links */}
      <nav className="flex sm:flex-row gap-18 md:gap-24 lg:gap-20 py-6 sm:py-10">
        {[
          {label: '자전거 도로', href: '/roadMap'},
          {label: '라이더 크루', href: '/riderCrewBoard'},
          {label: '자유게시판', href: '/freeBoard'},
          {label: 'Q & A', href: '/qnaBoard'},
        ].map(({label, href}) => (
          <Link href={href} key={href}>
            <p className="font-bold text-base sm:text-[16px] dark:text-black1">{label}</p>
          </Link>
        ))}
      </nav>
    </header>
  );
}
